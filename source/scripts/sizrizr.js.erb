/*
**  Sizrizr v0.2 | MIT foo
**  built: <%= Time.now.strftime('%b %d,%Y') %>
*/
window.Sizrizr = ( function( window, document ) {

  var docElement = document.documentElement,
      Sizrizr = {};


  /*
  **  Sizrizr points array
  **  stores points as they're added
  */
  Sizrizr.points = [];


  /*
  **  Get the current window width
  **  @return [Integer]
  */
  Sizrizr.width = function(){

    var width = 0,
        docBody = document.body;

    if( typeof( window.innerWidth ) == 'number' ) {
      width = window.innerWidth; //Non-IE
    } else if( docElement && ( docElement.clientWidth ) ) {
      width = docElement.clientWidth; //IE 6+ in 'standards compliant mode'
    } else if( docBody && ( docBody.clientWidth || docBody.clientHeight ) ) {
      width = docBody.clientWidth; //IE 4 compatible
    }

    return width;
  };


  /*
  **
  **
  **
  */
  Sizrizr.testPoint = function( name, winWidth ){

    var point = Sizrizr[name].point,
        type = Sizrizr[name].type;

    var test = ( type === "between" && winWidth >= point[0] && winWidth < point[1] ) ? true : ( type === "under" && winWidth < point ) ? true : ( type === "over" && winWidth >= point ) ? true : false;

    Sizrizr[name].test = ( test === true ) ? true : false;

    if(test === true){ Sizrizr.classes.push( 'sizrizr-' + name ); }

  };


  /*
  **  Add a point to track the window width for
  **
  **  @param name [String]
  **  @param type [String] options: "over", "under", "between"
  **  @param point [Integer|Array] use an array if type is "between"
  **  @return [Void]
  */
  Sizrizr.addPoint = function( name, type, point ){

    Sizrizr.points.push( name );

    Sizrizr[name] = {
      point: point,
      type: type
    };

    return Sizrizr;

  };


  /*
  **
  **
  **
  */
  Sizrizr.run = function(){

    Sizrizr.classes = [ "sizrizr" ];

    // grab the current width
    var winWidth = Sizrizr.width();

    for (var i = 0; i < Sizrizr.points.length; i++) {
      Sizrizr.testPoint( Sizrizr.points[i], winWidth );
    }

    // Remove "no-js" class from <html> element, if it exists
    // remove sizrizr and sizrizr-{pont} from <html> if they exist
    // add the new classes to the <html> element.
    docElement.className = docElement.className.replace(/(^|\s)no-js(\s|$)/, '$1$2').replace(/(\s|)sizrizr(-\w*|)(\s|)/g, '') + ' ' + Sizrizr.classes.join(' ');

    return Sizrizr;

  };

  return Sizrizr;


})( this, this.document );